<div class="treehouse-container">
  <div class="treehouse-info">
    <h1 class="treehouse-title"><%= @treehouse.name %></h1>
      <div class="treehouse-photos">
    <% if @treehouse.photos.attached? %>
      <% @treehouse.photos.each do |photo| %>
        <%= cl_image_tag photo.key, class: "treehouse-photo" %>
      <% end %>
    <% else %>
      <%= image_tag "default-photo-url", class: "treehouse-photo" %>
    <% end %>
  </div>
    <div class="treehouse-details">
      <p>Tree Type: <%= @treehouse.tree_type %></p>
      <p>Description: <%= @treehouse.summary %></p>

      <p>Total occupancy: <%= @treehouse.total_occupancy %> guests</p>
      <p>Price: $<%= @treehouse.price %> per night</p>
    </div>
    <div class="treehouse-actions">
      <%= link_to "Book this treehouse", new_treehouse_booking_path(@treehouse), class: "btn btn-primary" %>
      <%= link_to "Back home", treehouses_path, class: "btn btn-secondary" %>
        <% if @treehouse.user == current_user %>
          <%= link_to "Edit treehouse", edit_treehouse_path(@treehouse), class: "btn btn-secondary" %>
        <% end %>

        <% if @treehouse.user == current_user %>
          <%= link_to treehouse_path(@treehouse), method: :delete, data: { confirm: "Are you sure you want to delete this treehouse?" }, class: "btn btn-danger" do %>
        <% end %>
        <i class="fas fa-trash-alt"></i>
      <% end %>
    </div>
  </div>

  <div class="treehouse-photos">
    <p>Address: <%= @treehouse.address %></p>
        <%= js_map [{latitude: @treehouse.latitude, longitude: @treehouse.longitude}] %>
  </div>
</div>
